{% extends "base.html" %}
{% block main %}
  <div class="container py-4">
    <div class="form-signin mx-auto" style="max-width:720px;">
      <div class="auth-card">
        <div class="brand" style="justify-content:flex-start;">
          <img src="{{ user.profile_pic if (user.profile_pic.startswith('data:') or user.profile_pic.startswith('/')) else url_for('static', filename=user.profile_pic) }}" alt="avatar" class="avatar-lg" style="width:96px;height:96px;border-radius:12px;object-fit:cover">
          <div style="margin-left:12px">
            <h4 style="margin:0">Edit profile</h4>
            <div class="muted small">Update your account information</div>
          </div>
        </div>

        <form method="POST" action="/profile-edit-action/{{ userid }}" enctype="multipart/form-data" class="mt-3">
          <div class="row g-2">
            <div class="col-md-6">
              <div class="form-floating">
                <input type="text" class="form-control" id="name" value="{{ user.name }}" name="name" placeholder="Full name" required>
                <label for="name">Name</label>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating">
                <input type="email" class="form-control" id="email" value="{{ user.email }}" name="email" placeholder="name@example.com" required>
                <label for="email">Email address</label>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating">
                <input type="text" class="form-control" id="contact" value="{{ user.contact_no }}" name="contact_no" placeholder="Contact No.">
                <label for="contact">Contact No.</label>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating">
                <input type="password" class="form-control" id="password" name="password" placeholder="Password">
                <label for="password">Password</label>
              </div>
            </div>
            <div class="col-12">
              <div class="form-floating">
                <input type="text" class="form-control" id="bio" value="{{ user.bio }}" name="bio" placeholder="Bio">
                <label for="bio">Bio</label>
              </div>
            </div>

            <div class="col-12">
              <label class="form-label">Avatar (optional)</label>
              <input class="form-control" type="file" name="file" accept="image/*">
            </div>

            <div class="col-12">
              <label class="form-label d-block">Gender</label>
              <div class="d-flex gap-3">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sex" id="male" value="Male" {% if user.sex == 'Male' %}checked{% endif %}>
                  <label class="form-check-label" for="male">Male</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sex" id="female" value="Female" {% if user.sex == 'Female' %}checked{% endif %}>
                  <label class="form-check-label" for="female">Female</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sex" id="other" value="Other" {% if user.sex == 'Other' %}checked{% endif %}>
                  <label class="form-check-label" for="other">Other</label>
                </div>
              </div>
            </div>

            <div class="col-12 mt-3 text-end">
              <button class="btn btn-post" type="submit">Update profile</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}